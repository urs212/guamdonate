<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>후원 후기</title>

<style>
    body {
        background: #0f0f0f;
        color: white;
        font-family: 'Noto Sans KR', sans-serif;
        margin: 0;
        padding: 0;
    }

    .header {
        background: linear-gradient(135deg, #ff0066, #6600ff);
        padding: 40px 20px;
        text-align: center;
        font-size: 34px;
        font-weight: 700;
        box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }

    .container {
        width: 90%;
        max-width: 900px;
        margin: 30px auto;
    }

    .input-card {
        background: #1a1a1a;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    }

    input, textarea {
        width: 100%;
        padding: 12px;
        margin-top: 8px;
        border: none;
        border-radius: 10px;
        outline: none;
        font-size: 16px;
        background: #2a2a2a;
        color: white;
    }

    button {
        width: 100%;
        margin-top: 12px;
        padding: 12px;
        border: none;
        border-radius: 10px;
        background: linear-gradient(135deg, #ff0066, #6600ff);
        color: white;
        font-size: 18px;
        cursor: pointer;
        font-weight: 600;
    }
    button:hover {
        opacity: 0.85;
    }

    .comment {
        background: #1b1b1b;
        padding: 18px;
        border-radius: 14px;
        margin-bottom: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    }

    .comment-name {
        font-weight: 700;
        font-size: 18px;
    }

    .comment-text {
        margin-top: 8px;
        font-size: 16px;
        opacity: 0.9;
    }

    .time {
        margin-top: 5px;
        font-size: 14px;
        opacity: 0.6;
    }
</style>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

</head>
<body>

<div class="header">후원 후기</div>

<div class="container">

    <div class="input-card">
        <h2>댓글 작성</h2>
        <input id="name" placeholder="이름을 입력하세요">
        <textarea id="comment" rows="4" placeholder="후기 내용을 입력하세요"></textarea>
        <button onclick="sendComment()">등록하기</button>
    </div>

    <h2>전체 후기</h2>
    <div id="commentList"></div>

</div>

<script>
/* Firebase 설정 */
const firebaseConfig = {
  apiKey: "AIzaSyCCZmgG_vItSO_K2T682nZiPmvCxPtSYfo",
  authDomain: "donate-af842.firebaseapp.com",
  projectId: "donate-af842",
  storageBucket: "donate-af842.firebasestorage.app",
  messagingSenderId: "552508203150",
  appId: "1:552508203150:web:6fe1883b9b023d2f6569df",
  measurementId: "G-DZT7KS672R",
  databaseURL: "https://donate-af842-default-rtdb.firebaseio.com/"
};

// Firebase 초기화
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* 댓글 업로드 */
function sendComment() {
    const name = document.getElementById("name").value.trim();
    const text = document.getElementById("comment").value.trim();

    if (!name || !text) {
        alert("이름과 내용을 모두 입력하세요!");
        return;
    }

    db.ref("comments").push({
        name: name,
        text: text,
        time: new Date().toLocaleString()
    });

    document.getElementById("name").value = "";
    document.getElementById("comment").value = "";
}

/* 댓글 실시간 불러오기 */
db.ref("comments").on("value", snapshot => {
    const list = document.getElementById("commentList");
    list.innerHTML = "";

    snapshot.forEach(child => {
        const c = child.val();

        const div = document.createElement("div");
        div.className = "comment";

        div.innerHTML = `
            <div class="comment-name">${c.name}</div>
            <div class="comment-text">${c.text}</div>
            <div class="time">${c.time}</div>
        `;

        list.prepend(div);
    });
});
</script>

</body>
</html>
